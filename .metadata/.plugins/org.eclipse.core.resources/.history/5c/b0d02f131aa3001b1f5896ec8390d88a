<%@page import="com.itwillbs.board.BoardBean"%>
<%@page import="java.util.ArrayList"%>
<%@page import="com.itwillbs.board.BoardDAO"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
  <h1>WebContent/board/list.jsp</h1>
  <%
   // 디비에 저장된 글의 개수를 알기
   
   // BoardDAO 객체 생성
   BoardDAO bdao = new BoardDAO();
   // 디비에 글의 수를 계산하는 메서드 생성 -> 호출
   // getBoardCount();
   int cnt = bdao.getBoardCount();
   
   /////////////////////////////////////////////////
   //게시판 페이징 처리 : DB에서 원하는 만큼만 글 가져오기
   
   //한페이지당 보여줄 글의 개수
   int pageSize = 10;
   
   //현페이지가 몇페이지 인지 확인
   String pageNum = request.getParameter("pageNum");
   if(pageNum == null){
	   pageNum = "1";
   }
   
   //페이지별 시작행 계산하기
   //1p -> 1번, 2p -> 11번 , 3p -> 21번 ,....=> 일반화
   
   int currentPage = Integer.parseInt(pageNum);
   int startRow = (currentPage-1)*pageSize+1; // 그냥 외워라...
   
   //끝행 계산하기
   //1p ->10번, 2p -> 20, 3p -> 30 =>일반화
   int endRow = currentPage*pageSize;
   
   //  디비에 저장된 모든 글정보를 가져오기 
 
  // ArrayList boardListAll = bdao.getBoardList(); 
   
   //디비에 저장된 모든 글중에서 원하는 만큼만 가져오기(페이지 사이즈)
   ArrayList boardList bdao.getBoardList(startRow,pageSize);
   
  %>
  <h2> ITWILL 게시판 글목록 [총 : <%=cnt %>개] </h2>
  
  	<h3><a href="writeForm.jsp">글쓰기</a></h3>
  
  <table border="1">
    <tr>
      <td>번호</td>
      <td>제목</td>
      <td>작성자</td>
      <td>작성일</td>
      <td>조회수</td>
      <td>IP</td>
    </tr>
    
    <%
     
    for(int i=0; i<boardList.size(); i++){
    	  BoardBean bb = (BoardBean) boardList.get(i);
    %>
     <tr>
      <td><%=bb.getNum() %></td>
      <td><%=bb.getSubject() %></td>
      <td><%=bb.getName() %></td>
      <td><%=bb.getDate() %></td>
      <td><%=bb.getReadcount() %></td>
      <td><%=bb.getIp() %></td>
    </tr>
    <%
    }
    %>
    
    
  </table>
  
  
  
  



</body>
</html>